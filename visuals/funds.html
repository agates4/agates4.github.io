<!DOCTYPE html>
<html>
<meta charset="utf-8">

<script src="../scripts/d3.min.js"></script>
<link rel="stylesheet" type="text/css" href="../style.css">
<link rel="stylesheet" type="text/css" href="../scripts/bootstrap/css/bootstrap.css">

<head>
    <title>Mutual Funds</title>
</head>

<body>
    <div id="title" align="center">
        <h2>Mutual Funds</h2>
    </div>
    <div class="container">
        <div class="row">
            <div id="myDropDown" class="form-group"> </div>
        </div>
        <div class="row">
            <div class="col-md-3">Yield</div>
            <div class="col-md-3" id="yield"></div>
            <div class="col-md-3">Category</div>
            <div class="col-md-3" id="category"></div>
        </div>
        <div class="row">
            <div class="col-md-3">Net assets</div>
            <div class="col-md-3" id="netassets"></div>
            <div class="col-md-3">rating</div>
            <div class="col-md-3" id="rating"></div>
        </div>
        <div class="row">
            <div id="chart1"></div>
        </div>
    </div>
    <!--Adding JS files for Charts-->
    <script src="../D3Scripts/BarNegatives.js"></script>
    <script src="../D3Scripts/Utility.js"></script>
    <!--Calling Chart Drawing Functions with length width paremeter-->
    <script>
        d3.csv("../data/a1-mutualfunds.csv", function (data) {
            var select = populateDropDown(data, "#myDropDown", "Name");
            DrawChart(data[0]);
            select.on("change", function (d) {
                var value = d3.select(this).property("value");
                var filterdata = filterData(data, 'Name', value);
                filterdata = filterdata[0];
                DrawChart(filterdata);
            });

            function DrawChart(filterdata) {

                d3.select("#yield").text(filterdata.Yield);
                d3.select("#expense").text(filterdata.Expense);
                d3.select("#rating").text(filterdata.rating);
                d3.select("#category").text(filterdata.Category);
                d3.select("#netassets").text(filterdata["Net assets"]);

                var arr = new Array();

                arr.push({
                    "name": "YTD",
                    "value": +filterdata.YTD
                });
                arr.push({
                    "name": "3 MO",
                    "value": +filterdata.MO3
                });
                arr.push({
                    "name": "1 YR",
                    "value": +filterdata.YR1
                });
                arr.push({
                    "name": "3 YR",
                    "value": +filterdata.YR3
                });
                arr.push({
                    "name": "5 YR",
                    "value": +filterdata.YR5
                });
                arr.push({
                    "name": "10 YR",
                    "value": +filterdata.YR10
                });

                d3.select("#chart1").select("svg").remove();
                DrawStocks("#chart1", arr);
            }
        });
    </script>
</body>

</html>